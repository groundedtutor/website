---
import Link from "@components/astro/link.astro";
import Dropdown from "./dropdown.astro";
import { Astronav, MenuItems, MenuIcon } from "astro-navbar";

interface Props {
    hideMenu?: boolean;
    hideTitle?: boolean;
}

const menuitems = [
    {
        title: "Features",
        path: "#",
        children: [
            { title: "Action", path: "/" },
            { title: "Another action", path: "#" },
            { title: "Dropdown Submenu", path: "#" },
            { title: "404 Page", path: "/404" },
        ],
    },
    {
        title: "Pricing",
        path: "/pricing",
    },
    {
        title: "About",
        path: "/about",
    },
    {
        title: "Blog",
        path: "/blog",
    },
    {
        title: "Contact",
        path: "/contact",
    },
];

const { hideMenu = false, hideTitle = false } = Astro.props;

const signupEnabled = import.meta.env.PUBLIC_ENABLE_SIGNUP === "true";
---

<div class="my-5 flex flex-col items-center justify-between lg:flex-row">
    <Astronav>
        <div class="flex w-full items-center justify-between lg:w-auto">
            <a href="/" class="text-lg" class:list={{ hidden: hideTitle }}
                ><span class="font-bold text-slate-800">Grounded</span><span class="text-slate-500"
                    >Tutor</span
                >
            </a>
            <div class="block lg:hidden" class:list={{ hidden: hideMenu }}>
                <MenuIcon class="h-4 w-4 text-gray-800" />
            </div>
        </div>
        <div class:list={[{ hidden: hideMenu }]}>
            <MenuItems class="mt-2 hidden w-full lg:mt-0 lg:flex lg:w-auto">
                <ul class="flex flex-col lg:flex-row lg:gap-3">
                    {
                        menuitems.map((item, index) => (
                            <>
                                {item.children && (
                                    <li class="pointer-events-none cursor-default">
                                        <Dropdown
                                            title={item.title}
                                            items={item.children}
                                            lastItem={index === menuitems.length - 1}
                                        />
                                    </li>
                                )}

                                {!item.children && (
                                    <li class="pointer-events-none cursor-default">
                                        <a
                                            href={item.path}
                                            class="flex py-2 text-gray-600 hover:text-gray-900 lg:px-3"
                                        >
                                            {item.title}
                                        </a>
                                    </li>
                                )}
                            </>
                        ))
                    }
                </ul>
                <div class="mt-3 flex items-center gap-4 lg:hidden">
                    <Link href="#" style="muted" block size="md">Log in</Link>
                    <Link href="#" size="md" block>Sign up</Link>
                </div>
            </MenuItems>
        </div>
    </Astronav>
    <div class:list={[{ hidden: !signupEnabled }]}>
        <div class="hidden items-center gap-4 lg:flex">
            <a href="#">Log in</a>
            <Link href="#" size="md">Sign up</Link>
        </div>
    </div>
</div>
